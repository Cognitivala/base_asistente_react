{"version":3,"sources":["main.js"],"names":["window","document","mainHandlers","src","origin","responsive","createIframe","div","createElement","ifrm","setAttribute","classList","add","appendChild","body","basicStylesSetUp","onmessage","e","data","test","undefined","mensaje","msg","styleIframe","responsiveFunc","classStyle","iframeClasslist","getElementById","remove","head","css","style","type","createTextNode","iframe","contentWindow","postMessage","setTimeout","styleIframeMessage","outerWidth","CognitiveAssistantMain","onresize","onready"],"mappings":"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","file":"main.js","sourcesContent":["(function(window, document) {\n  \"use strict\";\n  class mainHandlers {\n    constructor() {}\n\n    init(src, origin) {\n      this.src = src;\n      this.origin = origin;\n      // console.log('init: ', this.origen)\n      this.responsive = \"\";\n      this.createIframe();\n    }\n\n    createIframe() {\n      var div = document.createElement(\"div\"),\n        ifrm = document.createElement(\"iframe\");\n\n      ifrm.setAttribute(\"id\", \"ifrm-assitant\");\n      ifrm.classList.add(\"iframe-cognitive-assistant-container\");\n      ifrm.classList.add(\"active\");\n      ifrm.classList.add(\"notification\");\n      ifrm.setAttribute(\"allow\", \"geolocation *;\");\n      ifrm.setAttribute(\"allow\", \"microphone *;\");\n      ifrm.setAttribute(\"src\", this.src);\n      ifrm.setAttribute(\"data-origin\", this.origin);\n      div.appendChild(ifrm);\n      document.body.appendChild(div);\n      this.basicStylesSetUp();\n      window.onmessage = e => {\n        if (e.data.test !== undefined) {\n          const mensaje = e.data.test[0].msg;\n          this.styleIframe(mensaje);\n        }else if(e.data.responsiveFunc !== undefined){\n          this.responsiveFunc();\n        }\n      };\n    }\n\n    styleIframe(classStyle) {\n      const iframeClasslist = document.getElementById(\"ifrm-assitant\")\n        .classList;\n      switch (classStyle) {\n        case \"assistant\":\n          iframeClasslist.add(classStyle);\n          iframeClasslist.remove(\"notification\");\n          iframeClasslist.remove(\"launcher\");\n          iframeClasslist.remove(\"minimized\");\n          break;\n        case \"notification\":\n          iframeClasslist.add(classStyle);\n          iframeClasslist.remove(\"assistant\");\n          iframeClasslist.remove(\"launcher\");\n          iframeClasslist.remove(\"minimized\");\n          break;\n        case \"launcher\":\n          iframeClasslist.add(classStyle);\n          iframeClasslist.remove(\"assistant\");\n          iframeClasslist.remove(\"notification\");\n          iframeClasslist.remove(\"minimized\");\n          break;\n        case \"minimized\":\n          iframeClasslist.add(classStyle);\n          iframeClasslist.remove(\"assistant\");\n          iframeClasslist.remove(\"notification\");\n          iframeClasslist.remove(\"launcher\");\n          break;\n        default:\n          break;\n      }\n    }\n\n    basicStylesSetUp() {\n      const head = document.head;\n      let css = \"\",\n        style = document.createElement(\"style\");\n\n      css +=\n        \".iframe-cognitive-assistant-container {overflow: hidden;border: none;position: fixed;bottom: 10px;right: 10px;background-color: transparent;opacity: 0;transform: translate3d(0,100%,0);transition: transform opacity height 350ms ease;pointer-events: none;transition-timing-function: cubic-bezier(0.56, 1.19, 0.2, 1.05);z-index: 99999999;border-radius: 5px;}\";\n      css +=\n        \".iframe-cognitive-assistant-container.active {opacity: 1;transform: translate3d(0,0,0);pointer-events: auto;}\";\n      css +=\n        \".iframe-cognitive-assistant-container.notification{ height: 300px;width: 300%;max-width: 330px;box-shadow: none;right: 0;bottom: 0; }\";\n      css +=\n        \".iframe-cognitive-assistant-container.assistant{ height: 100vh;width: 100%;max-width: 401px;right: 0px;bottom: 0px; }\";\n      css +=\n        \".iframe-cognitive-assistant-container.minimized{ height: 100px;width: 100%;max-width: 100px;right: 10px;bottom: 0px;}\";\n      css += \".cognitive-iframe {height: 100%;width: 100%;border: 0 none;}\";\n      css +=\n        \"@media screen and (max-width: 767px){ .iframe-cognitive-assistant-container.assistant{ border-radius: 0px; height: 100% ; top: 0; left: 0; right: 0; bottom: 0; max-width:100%; } \";\n      css +=\n        \".iframe-cognitive-assistant-container.minimized{max-width: none; bottom:0; left:0; right:0;} }\";\n      css +=\n        \"@media screen and (min-width: 1000px) and (max-width: 1200px){ .iframe-cognitive-assistant-container.assistant{ width: 45% }  }\";\n\n      style.type = \"text/css\";\n\n      style.appendChild(document.createTextNode(css));\n      head.appendChild(style);\n    }\n\n    styleIframeMessage() {\n      const iframe = document.getElementById(\"ifrm-assitant\");\n      const contentWindow = iframe?iframe.contentWindow:null;\n      if (contentWindow) {\n          contentWindow.postMessage({ responsive: this.responsive }, \"*\");\n      } else {\n        setTimeout(() => {\n          this.styleIframeMessage();\n        }, 600);\n      }\n    }\n\n    responsiveFunc() {\n      if (window.outerWidth <= 767) {\n        if (this.responsive !== \"mobile\") {\n          this.responsive = \"mobile\";\n          this.styleIframeMessage();\n        }\n      } else {\n        if (this.responsive !== \"desktop\") {\n          this.responsive = \"desktop\";\n          this.styleIframeMessage();\n        }\n      }\n    }\n  }\n  window.CognitiveAssistantMain = new mainHandlers();\n  window.onresize = () => {\n    window.CognitiveAssistantMain.responsiveFunc();\n  };\n  \n  document.onready;\n})(window, document);\n"]}