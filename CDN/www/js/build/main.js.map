{"version":3,"sources":["main.js"],"names":["window","document","mainHandlers","src","origin","responsive","createIframe","divAsistente","getElementById","undefined","console","log","div","createElement","ifrm","setAttribute","classList","add","appendChild","body","basicStylesSetUp","onmessage","e","data","test","mensaje","msg","styleIframe","responsiveFunc","classStyle","iframeClasslist","remove","head","css","style","type","createTextNode","iframe","contentWindow","postMessage","tokenAuth","sessionStorage","getItem","setTimeout","styleIframeMessage","outerWidth","CognitiveAssistantMain","onresize","onready"],"mappings":"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","file":"main.js","sourcesContent":["(function(window, document) {\n    \"use strict\";\n    class mainHandlers {\n        constructor() {}\n\n        init(src, origin) {\n            // console.log('src:: ', src);\n            // console.log('origin:: ', origin);\n            this.src = src;\n            this.origin = origin;\n            this.responsive = \"\";\n            this.createIframe();\n        }\n\n        createIframe() {\n            debugger;\n            var divAsistente = document.getElementById(\"ifrm-assitant\");\n\n            if(divAsistente === null || divAsistente === undefined){\n\n            console.log(divAsistente);\n            console.log('console de prueba para crear iframe');\n\n            var div = document.createElement(\"div\"),\n                ifrm = document.createElement(\"iframe\");\n\n                ifrm.setAttribute(\"id\", \"ifrm-assitant\");\n                ifrm.classList.add(\"iframe-cognitive-assistant-container\");\n                ifrm.classList.add(\"active\");\n                ifrm.classList.add(\"notification\");\n                ifrm.setAttribute(\"allow\", \"geolocation *;\");\n                ifrm.setAttribute(\"allow\", \"microphone *;\");\n                ifrm.setAttribute(\"src\", this.src);\n                ifrm.setAttribute(\"data-origin\", this.origin);\n                div.appendChild(ifrm);\n                document.body.appendChild(div);\n                this.basicStylesSetUp();\n                window.onmessage = e => {\n                    if (e.data.test !== undefined) {\n                        const mensaje = e.data.test[0].msg;\n                        this.styleIframe(mensaje);\n                    } else if (e.data.responsiveFunc !== undefined) {\n                        this.responsiveFunc();\n                    }\n                };\n            }\n        }\n\n        styleIframe(classStyle) {\n            const iframeClasslist = document.getElementById(\"ifrm-assitant\")\n                .classList;\n            switch (classStyle) {\n                case \"assistant\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"launcher\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"notification\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"launcher\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"launcher\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"minimized\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"launcher\");\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        basicStylesSetUp() {\n            const head = document.head;\n            let css = \"\",\n                style = document.createElement(\"style\");\n\n            css +=\n                \".iframe-cognitive-assistant-container {overflow: hidden;border: none;position: fixed;bottom: 10px;right: 10px;background-color: transparent;opacity: 0;transform: translate3d(0,100%,0);transition: transform opacity height 350ms ease;pointer-events: none;transition-timing-function: cubic-bezier(0.56, 1.19, 0.2, 1.05);z-index: 99999999;border-radius: 5px;}\";\n            css +=\n                \".iframe-cognitive-assistant-container.active {opacity: 1;transform: translate3d(0,0,0);pointer-events: auto;}\";\n            css +=\n                \".iframe-cognitive-assistant-container.notification{ height: 100%;width: 100%;max-width: 365px;box-shadow: none;right: 0;bottom: 0; }\";\n            css +=\n                \".iframe-cognitive-assistant-container.assistant{ height: 100vh;width: 100%;max-width: 401px;right: 0px;bottom: 0px; }\";\n            css +=\n                \".iframe-cognitive-assistant-container.minimized{ height: 100px;width: 100%;max-width: 100px;right: 10px;bottom: 0px;}\";\n            css += \".cognitive-iframe {height: 100%;width: 100%;border: 0 none;}\";\n            css +=\n                \"@media screen and (max-width: 767px){ .iframe-cognitive-assistant-container.assistant{ border-radius: 0px; height: 100% ; top: 0; left: 0; right: 0; bottom: 0; max-width:100%; } \";\n            css +=\n                \".iframe-cognitive-assistant-container.minimized{max-width: none; bottom:0; left:0; right:0;} }\";\n            css +=\n                \"@media screen and (min-width: 1000px) and (max-width: 1200px){ .iframe-cognitive-assistant-container.assistant{ width: 45% }  }\";\n\n            style.type = \"text/css\";\n\n            style.appendChild(document.createTextNode(css));\n            head.appendChild(style);\n        }\n\n        styleIframeMessage() {\n            const iframe = document.getElementById(\"ifrm-assitant\");\n            const contentWindow = iframe ? iframe.contentWindow : null;\n\n            if (contentWindow) {\n                contentWindow.postMessage({\n                    responsive: this.responsive,\n                    tokenAuth: sessionStorage.getItem('token')\n                }, \"*\");\n            } else {\n                setTimeout(() => {\n                    this.styleIframeMessage();\n                }, 600);\n            }\n        }\n\n        responsiveFunc() {\n            if (window.outerWidth <= 767) {\n                if (this.responsive !== \"mobile\") {\n                    this.responsive = \"mobile\";\n                    this.styleIframeMessage();\n                }\n            } else {\n                if (this.responsive !== \"desktop\") {\n                    this.responsive = \"desktop\";\n                    this.styleIframeMessage();\n                }\n            }\n        }\n    }\n    window.CognitiveAssistantMain = new mainHandlers();\n    window.onresize = () => {\n        window.CognitiveAssistantMain.responsiveFunc();\n    };\n\n    document.onready;\n})(window, document);"]}