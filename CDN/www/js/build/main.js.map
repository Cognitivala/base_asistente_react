{"version":3,"sources":["main.js"],"names":["window","document","mainHandlers","src","origin","responsive","createIframe","div","createElement","ifrm","setAttribute","classList","add","appendChild","body","basicStylesSetUp","onmessage","e","data","test","undefined","mensaje","msg","styleIframe","responsiveFunc","previous_input","sessionStorage","setItem","classStyle","iframeClasslist","getElementById","remove","head","css","style","type","createTextNode","iframe","contentWindow","getItem","postMessage","setTimeout","styleIframeMessage","outerWidth","CognitiveAssistantMain","onresize","onready"],"mappings":"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","file":"main.js","sourcesContent":["(function(window, document) {\n    \"use strict\";\n    class mainHandlers {\n        constructor() {}\n\n        init(src, origin) {\n            // console.log('src:: ', src);\n            // console.log('origin:: ', origin);\n            this.src = src;\n            this.origin = origin;\n            this.responsive = \"\";\n            this.createIframe();\n        }\n\n        createIframe() {\n            var div = document.createElement(\"div\"),\n                ifrm = document.createElement(\"iframe\");\n\n            ifrm.setAttribute(\"id\", \"ifrm-assitant\");\n            ifrm.classList.add(\"iframe-cognitive-assistant-container\");\n            ifrm.classList.add(\"active\");\n            ifrm.classList.add(\"notification\");\n            ifrm.setAttribute(\"allow\", \"geolocation *;\");\n            ifrm.setAttribute(\"allow\", \"microphone *;\");\n            ifrm.setAttribute(\"src\", this.src);\n            ifrm.setAttribute(\"data-origin\", this.origin);\n            div.appendChild(ifrm);\n            document.body.appendChild(div);\n            this.basicStylesSetUp();\n            window.onmessage = e => {\n\n                if (e.data.test !== undefined) {\n                    const mensaje = e.data.test[0].msg;\n                    this.styleIframe(mensaje);\n                } else if (e.data.responsiveFunc !== undefined) {\n                    this.responsiveFunc();\n                    if (e.data.previous_input !== undefined || e.data.previous_input !== null) {\n                        sessionStorage.setItem('previous_input', e.data.previous_input);\n                    }\n                }\n            };\n        }\n\n        styleIframe(classStyle) {\n            const iframeClasslist = document.getElementById(\"ifrm-assitant\")\n                .classList;\n            switch (classStyle) {\n                case \"assistant\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"launcher\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"notification\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"launcher\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"launcher\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"minimized\");\n                    break;\n                case \"minimized\":\n                    iframeClasslist.add(classStyle);\n                    iframeClasslist.remove(\"assistant\");\n                    iframeClasslist.remove(\"notification\");\n                    iframeClasslist.remove(\"launcher\");\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        basicStylesSetUp() {\n            const head = document.head;\n            let css = \"\",\n                style = document.createElement(\"style\");\n\n            css +=\n                \".iframe-cognitive-assistant-container {overflow: hidden;border: none;position: fixed;bottom: 10px;right: 10px;background-color: transparent;opacity: 0;transform: translate3d(0,100%,0);transition: transform opacity height 350ms ease;pointer-events: none;transition-timing-function: cubic-bezier(0.56, 1.19, 0.2, 1.05);z-index: 99999999;border-radius: 5px;}\";\n            css +=\n                \".iframe-cognitive-assistant-container.active {opacity: 1;transform: translate3d(0,0,0);pointer-events: auto;}\";\n            css +=\n                \".iframe-cognitive-assistant-container.notification{ height: 200px; width: 220px;max-width: 365px;box-shadow: none;right: 0;bottom: 0; }\";\n            css +=\n                \".iframe-cognitive-assistant-container.assistant{ height: 100vh;width: 100%;max-width: 401px;right: 0px;bottom: 0px; }\";\n            css +=\n                \".iframe-cognitive-assistant-container.minimized{ height: 100px;width: 100%;max-width: 100px;right: 10px;bottom: 0px;}\";\n            css += \".cognitive-iframe {height: 100%;width: 100%;border: 0 none;}\";\n            css +=\n                \"@media screen and (max-width: 767px){ .iframe-cognitive-assistant-container.assistant{ border-radius: 0px; height: 100% ; top: 0; left: 0; right: 0; bottom: 0; max-width:100%; } \";\n            css +=\n                \".iframe-cognitive-assistant-container.minimized{max-width: none; bottom:0; left:0; right:0;} }\";\n            css +=\n                \"@media screen and (min-width: 1000px) and (max-width: 1200px){ .iframe-cognitive-assistant-container.assistant{ width: 45% }  }\";\n\n            style.type = \"text/css\";\n\n            style.appendChild(document.createTextNode(css));\n            head.appendChild(style);\n        }\n\n        styleIframeMessage() {\n            const iframe = document.getElementById(\"ifrm-assitant\");\n            const contentWindow = iframe ? iframe.contentWindow : null;\n            if (contentWindow) {\n\n                if (sessionStorage.getItem('previous_input') !== undefined || sessionStorage.getItem('previous_input') !== null) {\n                    contentWindow.postMessage({ responsive: this.responsive, previous_input: sessionStorage.getItem('previous_input') }, \"*\");\n                } else {\n                    contentWindow.postMessage({ responsive: this.responsive }, \"*\");\n                }\n\n\n            } else {\n                setTimeout(() => {\n                    this.styleIframeMessage();\n                }, 600);\n            }\n        }\n\n        responsiveFunc() {\n            if (window.outerWidth <= 767) {\n                if (this.responsive !== \"mobile\") {\n                    this.responsive = \"mobile\";\n                    this.styleIframeMessage();\n                }\n            } else {\n                if (this.responsive !== \"desktop\") {\n                    this.responsive = \"desktop\";\n                    this.styleIframeMessage();\n                }\n            }\n        }\n    }\n    window.CognitiveAssistantMain = new mainHandlers();\n    window.onresize = () => {\n        window.CognitiveAssistantMain.responsiveFunc();\n    };\n\n    document.onready;\n})(window, document);"]}