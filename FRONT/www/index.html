
<html lang="es-CL" dir="ltr" heightfull="heightfull">
  <head>
    <title>Configurar Asistente. MAD Cognitiva</title>
    <meta charset="UTF-8"/>
    <link rel="profile" href="http://gmpg.org/xfn/11"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <link rel="apple-touch-icon" sizes="57x57" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="http://asistente-react.mycognitiva.io/assets/img/favicon/apple-icon-180x180.png"/>
    <link rel="icon" type="image/png" sizes="192x192" href="http://asistente-react.mycognitiva.io/assets/img/favicon/android-icon-192x192.png"/>
    <link rel="icon" type="image/png" sizes="32x32" href="http://asistente-react.mycognitiva.io/assets/img/favicon/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="96x96" href="http://asistente-react.mycognitiva.io/assets/img/favicon/favicon-96x96.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="http://asistente-react.mycognitiva.io/assets/img/favicon/favicon-16x16.png"/>
    <link rel="manifest" href="http://asistente-react.mycognitiva.io/assets/img/favicon/manifest.json"/>
    <meta name="msapplication-TileColor" content="#000000"/>
    <meta name="msapplication-TileImage" content="http://asistente-react.mycognitiva.io/assets/img/favicon/ms-icon-144x144.png"/>
    <meta name="theme-color" content="#000000"/>
    <meta name="_csrf" content=""/>
    <meta name="insight-app-sec-validation" content="4d0a31e7-ca78-40a0-b0dd-a0b8415541e4"/>
    <meta name="apptrana" content="37adefb730ca40ca9d12cb9e55ed2ca3"/>
    <link id="mainCss" rel="stylesheet"/>
    <link href="http://asistente-react.mycognitiva.io/assets/img/favicon/favicon-32x32.png" rel="Shortcut Icon"/>
    <script type="text/javascript" src="http://asistente-react.mycognitiva.io/assets/js/constant.js"></script><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
  </head>
  <body class="no-scroll home" heightfull="heightfull">
    <div id="wrapper" heightfull="heightfull">
      <div class="f-row" heightfull="heightfull">
        <div class="f-col menu active" heightfull="heightfull" padding="padding">
          <div class="header">
            <div class="f-row align-center">
              <div class="f-col cognitiva-logo"><img src="http://asistente-react.mycognitiva.io/assets/img/cognitiva-logo.png" alt=""/></div>
            </div>
          </div>
          <ul class="menu" id="mainmenu">
            <li id="config-asis-btn"><a href="http://asistente-react.mycognitiva.io/"><i class="fa fa-cog" aria-hidden="true"></i>Configurar Asistente</a></li>
            <li id="personalizar-asis-btn"><a href="http://asistente-react.mycognitiva.io/personalizar/"><i class="fa fa-paint-brush" aria-hidden="true"></i>Personalizar Asistente</a></li>
            <li><a href="http://asistente-react.mycognitiva.io/indicadores/"><i class="fa fa-bar-chart" aria-hidden="true"></i>Indicadores</a>
              <ul class="sub-menu">
                <li><a href="http://asistente-react.mycognitiva.io/indicadores/interacciones/"><i class="fa fa-caret-right" aria-hidden="true"></i>Interacciones</a></li>
                <li><a href="http://asistente-react.mycognitiva.io/indicadores/origen/"><i class="fa fa-caret-right" aria-hidden="true"></i>Origen</a></li>
                <li><a href="http://asistente-react.mycognitiva.io/indicadores/valoraciones/"><i class="fa fa-caret-right" aria-hidden="true"></i>Valoraciones</a></li>
                <li><a href="http://asistente-react.mycognitiva.io/indicadores/nps/"><i class="fa fa-caret-right" aria-hidden="true"></i>NPS</a></li>
                <li><a href="http://asistente-react.mycognitiva.io/indicadores/me-gusta/"><i class="fa fa-caret-right" aria-hidden="true"></i>Me gusta</a></li>
              </ul>
            </li>
            <li id="admin-users-btn"><a href="http://asistente-react.mycognitiva.io/administrador-usuarios/"><i class="fa fa-users" aria-hidden="true"></i>Administrador Usuarios</a></li>
            <li id="get-code-btn"><a class="get-code" href="#;" onclick="openScript()"><i class="fa fa-code" aria-hidden="true"></i>Obtener código</a></li>
          </ul>
        </div>
        <div class="f-col content relative-position" padding="padding" heightfull="heightfull">
          <div class="spinner">
            <div class="loader"></div>
          </div>
          <div class="row">
            <div class="col-md-12 content-header">
              <button class="btn menu" button="button" onclick="menu()"><i class="fa fa-bars"></i></button>
              <div class="mad-cognitiva">
                <h5>Mantenedor Asistente Digital / <span></span></h5>
              </div>
              <button class="user" button="button" onclick="closeSession()">
                <div id="user">Hola, <span>Ernesto</span></div><i class="fa fa-hand-peace-o"></i>
              </button>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="container-tabs">
                <ul class="nav nav-tabs" id="tabs" role="tablist">
                  <li class="active" role="presentation"><a href="#" data-func="toggleTabs" data-index="0"><span>Intenciones</span></a></li>
                  <li role="presentation"><a href="#" data-func="toggleTabs" data-index="2"><span>Diálogo</span></a></li>
                  <li role="presentation"><a href="#" data-func="toggleTabs" data-index="3"><span>URL</span></a></li>
                  <li role="killswitch"><a href="#" data-func="toggleTabs" data-index="4"><span>Switch</span></a></li>
                </ul>
                <div class="tab-content">
                  <div class="tab-pane fade in active" id="intents" role="tabpanel" data-tab-target="0">
                    <ul class="list-intents" id="list-intents"></ul>
                    <div class="container-modal" id="modal-intent">
                      <div class="container-form">
                        <div class="form" data-validate="async" data-func-validate="saveIntent" novalidate="novalidate">
                          <fieldset class="hash" id="fieldset-intent">
                            <label>Nombre de intención</label><span>#</span>
                            <input id="name-intent" type="text" placeholder="Escribe el nombre de la intención" required="required"/><a class="button-add add-intent" href="#;" onclick="addFieldset(this, 'Ejemplo de intención', 'Escribe el ejemplo de la intención')">Añadir ejemplo <i class="fa fa-plus-circle" aria-hidden="true"></i></a>
                          </fieldset>
                          <div class="buttons">
                            <button class="pull-left" id="save-intent" button="button">Guardar</button>
                            <button class="pull-right" button="button" close="close" onclick="closeCustomModal('#modal-intent'); clearIntent('#name-intent', '#modal-intent')">Cerrar</button>
                          </div>
                        </div>
                      </div>
                      <div class="backdrop-modal"></div>
                    </div>
                    <div class="container-modal" id="modal-intent-edit">
                      <div class="container-form">
                        <form data-validate="async" data-func-validate="editIntent" novalidate="novalidate">
                          <fieldset class="hash" id="fieldset-intent-edit">
                            <label>Nombre de intención</label><span>#</span>
                            <input id="name-intent-edit" type="text" placeholder="Escribe el nombre de la intención" required="required" readOnly="readOnly"/><a class="button-add add-intent" href="#;" onclick="addFieldset(this, 'Ejemplo de intención', 'Escribe el ejemplo de la intención')">Añadir ejemplo <i class="fa fa-plus-circle" aria-hidden="true"></i></a>
                          </fieldset>
                          <div class="buttons">
                            <button class="pull-left" id="save-intent" button="button" type="submit">Guardar</button>
                            <button class="pull-right" button="button" close="close" onclick="closeCustomModal('#modal-intent-edit'); clearIntent('#name-intent', '#modal-intent-edit')" type="button">Cerrar</button>
                          </div>
                        </form>
                      </div>
                      <div class="backdrop-modal"></div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="dialog" role="tabpanel" data-tab-target="2">
                    <ul class="list-dialogs scroll" id="list-dialogs">       </ul>
                    <div class="container-modal" id="modal-dialog">
                      <div class="container-form">
                        <div class="form" data-validate="async" data-func-validate="saveDialog" novalidate="novalidate">
                          <fieldset>
                            <label>Nombre de diálogo</label>
                            <input class="input-upper" id="name-dialog" type="text" placeholder="Escribe el nombre de la entidad" required="required"/><a class="button-add" href="#;" onclick="addDialogOption(this)">Añadir respuesta<i class="fa fa-plus-circle" aria-hidden="true"></i></a>
                            <div id="responds" margin-top="margin-top">
                              <h6>Respuestas</h6>
                              <ul id="list-dialogs-respond"></ul>
                            </div>
                          </fieldset>
                          <div class="buttons">
                            <button class="pull-right" button="button" type="button" close="close" onclick="closeCustomModal('#modal-dialog'); clearIntent('#name-dialog', '#modal-dialog')">Cerrar</button>
                          </div>
                        </div>
                      </div>
                      <div class="backdrop-modal"></div>
                    </div>
                    <div class="container-modal" id="modal-dialog-edit">
                      <div class="container-form">
                        <div class="form" data-validate="async" data-func-validate="editDialog" novalidate="novalidate">
                          <fieldset>
                            <label>Nombre de diálogo</label>
                            <input class="input-upper" id="name-dialog-edit" type="text" placeholder="Escribe el nombre de la entidad" required="required"/><a class="button-add edit-button" href="#;" onclick="addDialogOption(this)">Añadir respuesta<i class="fa fa-plus-circle" aria-hidden="true"></i></a>
                            <div class="responds" id="responds-edit" margin-top="margin-top">
                              <h6>Respuestas</h6>
                              <ul class="list-dialogs-respond" id="list-dialogs-respond-edit"></ul>
                            </div>
                          </fieldset>
                          <div class="buttons">
                            <button class="pull-left" id="save-dialog-btn" button="button">Guardar</button>
                            <button class="pull-right" button="button" type="button" close="close" onclick="closeCustomModal('#modal-dialog-edit'); clearIntent('#name-dialog-edit', '#modal-dialog-edit')">Cerrar</button>
                          </div>
                        </div>
                      </div>
                      <div class="backdrop-modal"></div>
                    </div>
                    <div class="modal fade" id="myModalChoiceDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <button class="close" type="button" data-dismiss="modal" aria-label="Close" onclick="removeData()"><i class="fa fa-close"></i></button>
                            <h6 class="modal-title"></h6>
                          </div>
                          <div class="modal-body"></div>
                          <div class="modal-footer">
                            <button class="pull-left" type="button" data-dismiss="modal" button="button" data-func="confirmDeleteDialog">Aceptar</button>
                            <button class="pull-right" type="button" data-dismiss="modal" button="button" close="close" onclick="removeData()">Cancelar</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="url" role="tabpanel" data-tab-target="3">
                    <div class="form" id="form-url" autocomplete="off">
                      <fieldset>
                        <label>Ingresa la url del sitio en donde estará el asistente</label>
                        <input id="get-url" type="url" pattern="https?://.+" placeholder="Ej. https://www.google.cl" required="required" autocomplete="off"/>
                      </fieldset>
                      <button id="save-url" button="button" onclick="saveUrl()">Guardar</button>
                    </div>
                  </div>
                  <div class="tab-pane fade" id="killswitch" role="tabpanel" data-tab-target="4">
                    <div class="form" id="form-switch" autocomplete="off">
                      <fieldset>
                        <label class="title">Activa o desactiva el asistente virtual que se encuentra en tu sitio web.</label>
                        <label>
                          <input type="checkbox"/>
                          <div class="my-switch"></div>
                        </label>
                      </fieldset>
                      <button id="save-switch" button="button" data-func="saveSwitch">Guardar</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close"><i class="fa fa-close"></i></button>
            <h6 class="modal-title"></h6>
          </div>
          <div class="modal-body"></div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalChoice" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close" onclick="removeData()"><i class="fa fa-close"></i></button>
            <h6 class="modal-title"></h6>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button class="pull-left" id="choice" type="button" data-dismiss="modal" button="button" data-func="confirmDeleteIntent">Aceptar</button>
            <button class="pull-right" type="button" data-dismiss="modal" button="button" close="close" onclick="removeData()">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalChoiceEntity" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close" onclick="removeData()"><i class="fa fa-close"></i></button>
            <h6 class="modal-title"></h6>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button class="pull-left" id="choice" type="button" data-dismiss="modal" button="button" data-func="confirmDeleteEntity">Aceptar</button>
            <button class="pull-right" type="button" data-dismiss="modal" button="button" close="close" onclick="removeData()">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalExamples" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close" onclick="removeData()"><i class="fa fa-close"></i></button>
            <h6 class="modal-title"></h6>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button class="pull-left" id="confirm-delete-button" type="button" data-dismiss="modal" button="button" onclick="clickButton()">Aceptar</button>
            <button class="pull-right" type="button" data-dismiss="modal" button="button" close="close" onclick="removeData()">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalAssistant" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close"><i class="fa fa-close"></i></button>
          </div>
          <div class="modal-body heightfull">
            <iframe class="assistant" id="assistant-iframe" src="/asistente/" frameborder="0"></iframe>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalScript" tabindex="-1" role="dialog" aria-labelledby="myModalScriptLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close"><i class="fa fa-close"></i></button>
            <h6 class="modal-title">Copia y pega el siguiente código en tu web. Después de <span class="code"><span>&lt;</span>head<span>&gt;</span></span> y antes de <span class="code"><span>&lt;/</span>head<span>&gt;</span></span></h6>
          </div>
          <div class="modal-body">
            <pre text-left="text-left"></pre>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalWysiwyg" tabindex="-1" role="dialog" aria-labelledby="myModalWysiwygLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close" data-func="closeDialogW"><i class="fa fa-close"></i></button>
            <h6 class="modal-title"></h6>
          </div>
          <div class="modal-body">
            <div class="form" id="my-wysiwyg" autocomplete="off">
              <div id="toolbar">
                <ul class="my-toolbar">
                  <li><a href="#;" data-wysihtml5-command="bold" title="CTRL+B"><i class="fa fa-bold"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="italic" title="CTRL+I"><i class="fa fa-italic"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="createLink"><i class="fa fa-link"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="insertUnorderedList"><i class="fa fa-list-ul"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="insertOrderedList"><i class="fa fa-list-ol"></i></a></li>
                </ul>
                <div class="createLink" data-wysihtml5-dialog="createLink" style="display: none;">
                  <label><span>Enlace</span>
                    <input data-wysihtml5-dialog-field="href" placeholder="http://" autocomplete="off"/>
                  </label>
                  <ul class="save-link">
                    <li><a href="#;" data-wysihtml5-dialog-action="save"><i class="fa fa-save"></i></a></li>
                    <li><a href="#;" data-wysihtml5-dialog-action="cancel"><i class="fa fa-ban"></i></a></li>
                  </ul>
                </div>
                <textarea id="textarea" autocomplete="off"></textarea>
              </div>
              <div class="buttons">
                <button class="pull-left" button="button" data-dismiss="modal" data-func="saveDialogW">Guardar</button>
                <button class="pull-right" button="button" close="close" data-dismiss="modal" data-func="closeDialogW">Cancelar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalWysiwygNew" tabindex="-1" role="dialog" aria-labelledby="myModalWysiwygNewLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-label="Close" data-func="closeDialogW"><i class="fa fa-close"></i></button>
            <h6 class="modal-title"></h6>
          </div>
          <div class="modal-body">
            <div class="form" id="my-wysiwyg-new" autocomplete="off">
              <div id="toolbar-new">
                <ul class="my-toolbar">
                  <li><a href="#;" data-wysihtml5-command="bold" title="CTRL+B"><i class="fa fa-bold"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="italic" title="CTRL+I"><i class="fa fa-italic"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="createLink"><i class="fa fa-link"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="insertUnorderedList"><i class="fa fa-list-ul"></i></a></li>
                  <li><a href="#;" data-wysihtml5-command="insertOrderedList"><i class="fa fa-list-ol"></i></a></li>
                </ul>
                <div class="createLink" data-wysihtml5-dialog="createLink" style="display: none;">
                  <label><span>Enlace</span>
                    <input data-wysihtml5-dialog-field="href" autocomplete="off" placeholder="http://"/>
                  </label>
                  <ul class="save-link">
                    <li><a href="#;" data-wysihtml5-dialog-action="save"><i class="fa fa-save"></i></a></li>
                    <li><a href="#;" data-wysihtml5-dialog-action="cancel"><i class="fa fa-ban"></i></a></li>
                  </ul>
                </div>
                <textarea id="textareaNew" autocomplete="off"></textarea>
              </div>
              <div class="buttons">
                <button class="pull-left" button="button" data-dismiss="modal" data-func="saveNewDialogW">Guardar</button>
                <button class="pull-right" button="button" close="close" data-dismiss="modal" data-func="closeNewDialogW">Cancelar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="myModalDeleteDialog" tabindex="-1" role="dialog" aria-labelledby="myModalDeleteDialogLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h6 class="modal-title">Eliminar Respuesta</h6>
          </div>
          <div class="modal-body">
            <p>¿Estás seguro/a que deseas elminar esta respuesta?</p>
          </div>
          <div class="modal-footer">
            <button class="pull-left" type="button" data-dismiss="modal" button="button" data-func="removeConfirmDW">Cerrar</button>
            <button type="button" data-dismiss="modal" button="button" delete="delete" data-func="confirmRemoveDialogW">Eliminar <i class="fa fa-trash-o" aria-hidden="true"></i></button>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../assets/js/wysihtml5-0.3.0.min.js"></script>
    <script type="text/javascript" src="../assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../assets/js/bootstrap-wysihtml5.js"></script>
    <script type="text/javascript" src="../assets/js/crypto-js.min.js"></script>
    <script type="text/javascript" id="mainJS"></script>
    <script type="text/javascript" id="mainMadJS"></script>
    <script>
      var zzz = Date.now();
      document.getElementById('mainJS').setAttribute('src','../assets/js/main.js?v'+zzz);
      document.getElementById('mainMadJS').setAttribute('src','../assets/js/main.mad.js?v'+zzz);
      document.getElementById('mainMadJS').setAttribute('href','../assets/css/main.css?v'+zzz);
      
    </script>
    <script>
      var wysihtml5ParserRules = {
          "classes": {
              "wysiwyg-clear-both": 1,
              "wysiwyg-clear-left": 1,
              "wysiwyg-clear-right": 1,
              "wysiwyg-color-aqua": 1,
              "wysiwyg-color-black": 1,
              "wysiwyg-color-blue": 1,
              "wysiwyg-color-fuchsia": 1,
              "wysiwyg-color-gray": 1,
              "wysiwyg-color-green": 1,
              "wysiwyg-color-lime": 1,
              "wysiwyg-color-maroon": 1,
              "wysiwyg-color-navy": 1,
              "wysiwyg-color-olive": 1,
              "wysiwyg-color-purple": 1,
              "wysiwyg-color-red": 1,
              "wysiwyg-color-silver": 1,
              "wysiwyg-color-teal": 1,
              "wysiwyg-color-white": 1,
              "wysiwyg-color-yellow": 1,
              "wysiwyg-float-left": 1,
              "wysiwyg-float-right": 1,
              "wysiwyg-font-size-large": 1,
              "wysiwyg-font-size-larger": 1,
              "wysiwyg-font-size-medium": 1,
              "wysiwyg-font-size-small": 1,
              "wysiwyg-font-size-smaller": 1,
              "wysiwyg-font-size-x-large": 1,
              "wysiwyg-font-size-x-small": 1,
              "wysiwyg-font-size-xx-large": 1,
              "wysiwyg-font-size-xx-small": 1,
              "wysiwyg-text-align-center": 1,
              "wysiwyg-text-align-justify": 1,
              "wysiwyg-text-align-left": 1,
              "wysiwyg-text-align-right": 1
          },
          "tags": {
              "tr": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "strike": {
                  "remove": 1
              },
              "form": {
                  "rename_tag": "div"
              },
              "rt": {
                  "rename_tag": "span"
              },
              "code": {},
              "acronym": {
                  "rename_tag": "span"
              },
              "br": {
                  "add_class": {
                      "clear": "clear_br"
                  }
              },
              "details": {
                  "rename_tag": "div"
              },
              "h4": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "em": {},
              "title": {
                  "remove": 1
              },
              "multicol": {
                  "rename_tag": "div"
              },
              "figure": {
                  "rename_tag": "div"
              },
              "xmp": {
                  "rename_tag": "span"
              },
              "small": {
                  "rename_tag": "span",
                  "set_class": "wysiwyg-font-size-smaller"
              },
              "area": {
                  "remove": 1
              },
              "time": {
                  "rename_tag": "span"
              },
              "dir": {
                  "rename_tag": "ul"
              },
              "bdi": {
                  "rename_tag": "span"
              },
              "command": {
                  "remove": 1
              },
              "ul": {},
              "progress": {
                  "rename_tag": "span"
              },
              "dfn": {
                  "rename_tag": "span"
              },
              "iframe": {
                  "remove": 1
              },
              "figcaption": {
                  "rename_tag": "div"
              },
              "a": {
                  "check_attributes": {
                      "href": "url"
                  },
                  "set_attributes": {
                      "rel": "nofollow",
                      "target": "_blank"
                  }
              },
              "img": {
                  "check_attributes": {
                      "width": "numbers",
                      "alt": "alt",
                      "src": "url",
                      "height": "numbers"
                  },
                  "add_class": {
                      "align": "align_img"
                  }
              },
              "rb": {
                  "rename_tag": "span"
              },
              "footer": {
                  "rename_tag": "div"
              },
              "noframes": {
                  "remove": 1
              },
              "abbr": {
                  "rename_tag": "span"
              },
              "u": {},
              "bgsound": {
                  "remove": 1
              },
              "sup": {
                  "rename_tag": "span"
              },
              "address": {
                  "rename_tag": "div"
              },
              "basefont": {
                  "remove": 1
              },
              "nav": {
                  "rename_tag": "div"
              },
              "h1": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "head": {
                  "remove": 1
              },
              "tbody": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "dd": {
                  "rename_tag": "div"
              },
              "s": {
                  "rename_tag": "span"
              },
              "li": {},
              "td": {
                  "check_attributes": {
                      "rowspan": "numbers",
                      "colspan": "numbers"
                  },
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "object": {
                  "remove": 1
              },
              "div": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "option": {
                  "rename_tag": "span"
              },
              "select": {
                  "rename_tag": "span"
              },
              "i": {},
              "track": {
                  "remove": 1
              },
              "wbr": {
                  "remove": 1
              },
              "fieldset": {
                  "rename_tag": "div"
              },
              "big": {
                  "rename_tag": "span",
                  "set_class": "wysiwyg-font-size-larger"
              },
              "button": {
                  "rename_tag": "span"
              },
              "noscript": {
                  "remove": 1
              },
              "svg": {
                  "remove": 1
              },
              "input": {
                  "remove": 1
              },
              "table": {},
              "keygen": {
                  "remove": 1
              },
              "h5": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "meta": {
                  "remove": 1
              },
              "map": {
                  "rename_tag": "div"
              },
              "isindex": {
                  "remove": 1
              },
              "mark": {
                  "rename_tag": "span"
              },
              "caption": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "tfoot": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "base": {
                  "remove": 1
              },
              "video": {
                  "remove": 1
              },
              "strong": {},
              "canvas": {
                  "remove": 1
              },
              "output": {
                  "rename_tag": "span"
              },
              "marquee": {
                  "rename_tag": "span"
              },
              "b": {},
              "q": {
                  "check_attributes": {
                      "cite": "url"
                  }
              },
              "applet": {
                  "remove": 1
              },
              "span": {},
              "rp": {
                  "rename_tag": "span"
              },
              "spacer": {
                  "remove": 1
              },
              "source": {
                  "remove": 1
              },
              "aside": {
                  "rename_tag": "div"
              },
              "frame": {
                  "remove": 1
              },
              "section": {
                  "rename_tag": "div"
              },
              "body": {
                  "rename_tag": "div"
              },
              "ol": {},
              "nobr": {
                  "rename_tag": "span"
              },
              "html": {
                  "rename_tag": "div"
              },
              "summary": {
                  "rename_tag": "span"
              },
              "var": {
                  "rename_tag": "span"
              },
              "del": {
                  "remove": 1
              },
              "blockquote": {
                  "check_attributes": {
                      "cite": "url"
                  }
              },
              "style": {
                  "remove": 1
              },
              "device": {
                  "remove": 1
              },
              "meter": {
                  "rename_tag": "span"
              },
              "h3": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "textarea": {
                  "rename_tag": "span"
              },
              "embed": {
                  "remove": 1
              },
              "hgroup": {
                  "rename_tag": "div"
              },
              "font": {
                  "rename_tag": "span",
                  "add_class": {
                      "size": "size_font"
                  }
              },
              "tt": {
                  "rename_tag": "span"
              },
              "noembed": {
                  "remove": 1
              },
              "thead": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "blink": {
                  "rename_tag": "span"
              },
              "plaintext": {
                  "rename_tag": "span"
              },
              "xml": {
                  "remove": 1
              },
              "h6": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "param": {
                  "remove": 1
              },
              "th": {
                  "check_attributes": {
                      "rowspan": "numbers",
                      "colspan": "numbers"
                  },
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "legend": {
                  "rename_tag": "span"
              },
              "hr": {},
              "label": {
                  "rename_tag": "span"
              },
              "dl": {
                  "rename_tag": "div"
              },
              "kbd": {
                  "rename_tag": "span"
              },
              "listing": {
                  "rename_tag": "div"
              },
              "dt": {
                  "rename_tag": "span"
              },
              "nextid": {
                  "remove": 1
              },
              "pre": {},
              "center": {
                  "rename_tag": "div",
                  "set_class": "wysiwyg-text-align-center"
              },
              "audio": {
                  "remove": 1
              },
              "datalist": {
                  "rename_tag": "span"
              },
              "samp": {
                  "rename_tag": "span"
              },
              "col": {
                  "remove": 1
              },
              "article": {
                  "rename_tag": "div"
              },
              "cite": {},
              "link": {
                  "remove": 1
              },
              "script": {
                  "remove": 1
              },
              "bdo": {
                  "rename_tag": "span"
              },
              "menu": {
                  "rename_tag": "ul"
              },
              "colgroup": {
                  "remove": 1
              },
              "ruby": {
                  "rename_tag": "span"
              },
              "h2": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "ins": {
                  "rename_tag": "span"
              },
              "p": {
                  "add_class": {
                      "align": "align_text"
                  }
              },
              "sub": {
                  "rename_tag": "span"
              },
              "comment": {
                  "remove": 1
              },
              "frameset": {
                  "remove": 1
              },
              "optgroup": {
                  "rename_tag": "span"
              },
              "header": {
                  "rename_tag": "div"
              }
          }
      };
      
    </script>
    <script>
      var getModalBool = false,
          getService = '',
          getNameIntent = '',
          makeListIntent = '',
          getMakeListIntent = '',
          funcGetIntent = '',
          funcOpenModal = '',
          stringObj = '',
          tree = '',
          treeBranch = '',
          nameObj = '',
          getAllNames = [];
      
      function openDemo(e){
        var screenW   = this.outerWidth;
        var screenH   = this.outerHeight;
        var getSize   = '"width='+outerWidth+',height='+outerHeight+'"'; 
        window.open("/demo/", "_blank", getSize);
        e.preventDefault();
      }
      
      function spinnerOut(parent, bool){
        if(bool == true) {
          $(parent+' .spinner').fadeIn(300);
        } else {
          $(parent+' .spinner').fadeOut(300);
        }
      }
      
      function getAllIntents(){
        var args = {
          id_cliente: getSession
        }
        var promise = $.ajax({
          type: 'POST',
          url: getPath + 'mant/list_intents',
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer "+getTkn
          },
          data: JSON.stringify(args),
          dataType: 'json',
          contentType: 'application/json; charset=utf-8'
        }).done(function(response){
          if(response.status == '200'){
            var makeListIntent = '';
            var funcRemoveItem = "'delete_intent'";
            for(var i = 0; i < response.intents.length; i++) {
              var theIntent = "'"+response.intents[i].intent+"'";
              makeListIntent = '<li>';
              makeListIntent += '<div>';
              makeListIntent += '<a href="#;" onclick="getIntentExamples(this,'+theIntent+')">';
              makeListIntent += '<i class="fa fa-angle-right" aria-hidden="true"></i>';
              makeListIntent += '<h5>#'+response.intents[i].intent+'</h5>';
              makeListIntent += '</a>';
              //- makeListIntent += '<a href="#;" onclick="removeItem(this,'+funcRemoveItem+')"><i class="fa fa-trash"></i></a>';
              makeListIntent += '<a href="#;" onclick="deleteIntent(event)"><i class="fa fa-trash"></i></a>';
              makeListIntent += '</div>';
              makeListIntent += '</li>';
              $('#list-intents').append(makeListIntent);
            }
            spinnerOut('#intents', false);
          } else {
            spinnerOut('#intents', false);
            openModal('#myModal', 'Auch!', 'Tenemos un problema, favor intenta nuevamente', 'error');
          }
        })
      }
      
      function deleteIntent(event){
        event.preventDefault();
        var $item = $(event.currentTarget);
        $('[data-todelete]').removeAttr('data-todelete');
        $item.parent().parent().attr('data-todelete', '1');
        openModal('#myModalChoice', 'Advertencia', '¿Estás seguro que deseas remover este item?', '');
      }
      
      function getIntentExamples(el, intent){
        if(!el.classList.contains('examples')){
          var makeListIntent, getMakeListIntent = '';
          var funcGetIntent = "getIntent(this, '#modal-intent', '#name-intent', 'fieldset-intent')";
          var funcOpenModal = "openCustomModal(this,'#modal-intent', true, 'edit_intent')";
          var getService = 'edit_intent';
          var args = {
            id_cliente: getSession,
            intent: intent.toString()
          }
          var promise = $.ajax({
            type: 'POST',
            url: getPath + 'mant/list_examples',
            "headers": {
              "Content-Type": "application/json",
              "Authorization": "Bearer "+getTkn
            },
            data: JSON.stringify(args),
            dataType: 'json',
            contentType: 'application/json; charset=utf-8'
          }).done(function(response){
            if(response.status == '200'){
              if(response.examples.length > 0){
                for(var i = 0; i < response.examples.length; i++){
                  getMakeListIntent += '<li>';
                  getMakeListIntent += '<label>';
                  getMakeListIntent += '<div class="checkbox"><input type="checkbox"/><span></span></div>';
                  getMakeListIntent += '<span>'+response.examples[i].text+'</span>';
                  getMakeListIntent += '</label>';
                  getMakeListIntent += '</li>';
                }
                makeListIntent = '<ul>';
                makeListIntent += '<li class="options">';
                makeListIntent += '<button button="button" button-mini="button-mini" secondary="secondary" onclick="'+funcGetIntent+'; '+funcOpenModal+'">Editar / Añadir ejemplo<i class="fa fa-plus-circle" aria-hidden="true"></i></button>';
                makeListIntent += '<a href="#;" onclick="deleteExamples(this,';
                makeListIntent += "'"+getService+"'";
                makeListIntent += ')"><i class="fa fa-trash"></i></a>';
                makeListIntent += '</li>';
                makeListIntent += getMakeListIntent;
                makeListIntent += '</ul>';
                el.parentElement.parentElement.insertAdjacentHTML( 'beforeend', makeListIntent );
                el.classList.add('examples');
              }
      
            } else {
              spinnerOut('#intents', false);
              openModal('#myModal', 'Auch!', 'Tenemos un problema, favor intenta nuevamente', 'error');
            }
          })
        }
        myClick(el);
        getExamplesNum();
      }
      
      function getAllEntities(){
        getService = 'edit_entity';
        var args = {
          id_cliente : "1"
      
        }
        var promise = $.ajax({
          type: 'POST',
          url: getPath + 'mant/list_entities',
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer "+getTkn
          },
          data: JSON.stringify(args),
          dataType: 'json',
          contentType: 'application/json; charset=utf-8'
        }).done(function(response){
          if(response.status == '200' && response.data.length > 0){
            if(response.examples.length > 0){
              for(var i = 0; i < response.data.length; i++){
                getAllNames.push('@'+response.data[i].intents.entity.entity);
                getMakeListIntent = '';
                funcGetIntent = "getIntent(this, '#modal-entities', '#name-entity', 'fieldset-entity')";
                funcOpenModal = "openCustomModal(this,'#modal-entities', true, 'edit_entity')";
                funcRemoveItem = "'delete_entity'";
                for(var j = 0; j < response.data[i].intents.values.length; j++){
                  getMakeListIntent += '<li>';
                  getMakeListIntent += '<label>';
                  getMakeListIntent += '<div class="checkbox"><input type="checkbox"/><span></span></div>';
                  getMakeListIntent += '<span>'+response.data[i].intents.values[j].value+'</span>';
                  getMakeListIntent += '</label>';
                  getMakeListIntent += '</li>';
                }
                makeListIntent = '<li>';
                makeListIntent += '<div>';
                makeListIntent += '<a href="#;" onclick="myClick(this)">';
                makeListIntent += '<i class="fa fa-angle-right" aria-hidden="true"></i>';
                makeListIntent += '<h5>@'+response.data[i].intents.entity.entity+'</h5>';
                makeListIntent += '</a>';
                makeListIntent += '<a href="#;" onclick="removeItem(this, '+funcRemoveItem+')"><i class="fa fa-trash"></i></a>';
                makeListIntent += '</div>';
                makeListIntent += '<ul>';
                makeListIntent += '<li class="options">';
                makeListIntent += '<button button="button" button-mini="button-mini" secondary="secondary" onclick="'+funcGetIntent+'; '+funcOpenModal+'">Editar / Añadir ejemplo<i class="fa fa-plus-circle" aria-hidden="true"></i></button>';
                makeListIntent += '<a href="#;" onclick="deleteExamples(this,';
                makeListIntent += "'"+getService+"'";
                makeListIntent += ')"><i class="fa fa-trash"></i></a>';
                makeListIntent += '</li>';
                makeListIntent += getMakeListIntent;
                makeListIntent += '</ul>';
                makeListIntent += '</li>';
                $('#list-entities').append(makeListIntent);
              }
              getExamplesNum();
              spinnerOut('#entities');
            }
      
          } else {
            spinnerOut('#entities');
          }
        })
      }
      
      function openCustomModal(el, modal, bool, service) {
        if(modal == '#modal-dialog' || modal == '#modal-dialog-edit'){
          var options = '';
          var select = modal == '#modal-dialog' ? $(modal).find('#condition') : $(modal).find('#condition-edit');
          options = '<option selected value="">Seleccione</option>'
          for(var i = 0; i < window.dataConditions.length; i++){
            options += '<option value="'+ window.dataConditions[i] +'">'+ window.dataConditions[i] +'</option>';
          }
          select.html(options);
        }
        getService = service;
        $(modal).fadeIn(200);
        $(modal).delay(200).find('.container-form').addClass('active');
        $(modal).find('.buttons, form').fadeIn(200);
        getModalBool = bool;
        if(bool == true){
          el.parentElement.parentElement.parentElement.className = 'to-replace';
        }
      }
      
      function closeCustomModal(modal){
        $(modal).find('.container-form').removeClass('active');
        $(modal).delay(200).fadeOut(200);
        $(modal).find('.buttons, form').fadeOut(50);
        $(modal).removeClass('error');
        $(modal).removeClass('success');
      }
      
      $('button.close').click(function(){
        $(this).parent().parent().parent().parent().delay(500).removeClass('error, success');
      });
      
      function getIntent(el, modal, input, fieldset) {
        var arrList = [];
        var getH5 = el.parentElement.parentElement.parentElement.children[0].children[0].children[1].textContent.substring(1);
        //- el.parentElement.parentElement.parentElement.children["0"].children["0"].children[1]
        var getLengthExamples = el.parentElement.parentElement.children.length;
        for(var i = 0; i < getLengthExamples; i++){
          if(i != 0){
            var getVal = el.parentElement.parentElement.children[i].children[0].innerText;
            arrList.push(getVal);
          }
        }
        
        $(modal).find(input).val(getH5);
        $(modal).find('form').attr('data-type', 'edit');
      
        var getTest = document.getElementById(fieldset);
        var getLabelText = document.getElementById(fieldset).children[3].children[0].innerHTML;
        var getPlaceholder = document.getElementById(fieldset).children[2].attributes[2].textContent;
        for(var i = 0; i < arrList.length; i++){
          var where = document.getElementById(fieldset);        
          var subfieldset = '<fieldset class="wrapper-intent">';
              subfieldset += '<label>'+getLabelText+'</label>';
              subfieldset += '<input class="example-intent" type="text" value="'+arrList[i]+'" placeholder="'+getPlaceholder+'" required="required"/>';
              subfieldset += '<a class="add-intent delete" href="#;" onclick="removeFieldset(this)">';
              subfieldset += '<i class="fa fa-times-circle" aria-hidden="true"></i>';
              subfieldset += '</a>';
              subfieldset += '</fieldset>';
          where.insertAdjacentHTML('beforeend', subfieldset);
        }
      }
      
      function getExamplesNum(){
        $('ul.list-intents > li').each(function(){
          var num = '';
          if($(this).parent().is("#list-dialogs")){
            var num = $(this).find('ul li').length;
          } else {
            var num = $(this).find('ul li').length - 1 ;
          }
        });
      }
      getExamplesNum();
      
      function myClick(el){
        var myUl = el.parentElement.parentElement.children[1];
        var myIcon = el.children[0];
        myIcon.classList.toggle("fa-rotate-90");
        if(myUl.style.height == 0 || myUl.style.height == '0px'){
          myUl.style.height = "auto";
        } else {
          myUl.style.height = 0;
        }
      }
      
      function clearIntent(name, modal){
        var getContRespond  = document.getElementById('responds');
        getContRespond.style.display = "none";
        $('#list-dialogs-respond').empty();
        $(name).val('');
        var getEl = document.querySelectorAll(modal+' .example-intent').length;
        getEl = getEl - 1;
        for(var i = getEl; i >= 0; i--){
          $(modal+' .example-intent')[i].parentElement.remove();
        }
        return false;
      }
      
      function addFieldset(el, label, placeholder){
        var where = el.parentElement;
        var subfieldset = '<fieldset class="wrapper-intent">';
            subfieldset += '<label>'+label+'</label>';
            subfieldset += '<input class="example-intent" type="text" placeholder="'+placeholder+'" required="required"/>';
            subfieldset += '<a class="add-intent delete" href="#;" onclick="removeFieldset(this)">';
            subfieldset += '<i class="fa fa-times-circle" aria-hidden="true"></i>';
            subfieldset += '</a>';
            subfieldset += '</fieldset>';
        where.insertAdjacentHTML('beforeend', subfieldset);
      }
      
      function removeFieldset(el){
        el.parentElement.remove();
      }
      
      function removeItem(el, service){
        getService = service;
        el.parentElement.parentElement.setAttribute('data-todelete', '1');
        openModal('#myModalChoice', 'Advertencia', '¿Estás seguro que deseas remover este item?', '');
      }
      
      function confirmDelete(){
        getNameIntent = $('[data-todelete] h5').text().substring(1);
        var getDataAttr = document.querySelectorAll('[data-todelete]');
        switch (getService) {
          case 'delete_intent':
            tree = 'intent';
            treeBranch = 'examples';
            nameObj = "'text'";
            break;
          case 'delete_entity':
            tree = 'entity';
            treeBranch = 'new_values';
            nameObj = "'value'";
        }
        var args = {
          id_cliente : "1"
        }
        var promise = $.ajax({
          type: 'POST',
          url: getPath+"mant/"+getService,
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer "+getTkn
          },
          data: JSON.stringify(args),
          dataType: 'json',
          contentType: 'application/json; charset=utf-8'
        }).done(function(response){
          if(response.status == '200'){
            var msg = '';
            if(getService == 'delete_intent'){
              $('#list-intents').empty();
              msg = 'La intención se ha eliminado con éxito'
            } else {
              $('#list-entities').empty();
              msg = 'La entidad se ha eliminado con éxito'
            }
            openModal('#myModal', 'Genial!', msg, 'success');
          } else {
            openModal('#myModal', 'Auch!', 'Tenemos un problema, favor intenta nuevamente', 'error');
          }
        })
        $('[data-todelete]').remove();
      }
      
      function removeData(){
        $('[data-todelete]').removeAttr('data-todelete');
      }
      
      function deleteExamples(el, service){
        var getChildren = el.parentElement.parentElement.children;
        var getParent = el.parentElement.parentElement.parentElement.parentElement.id;
        if(getParent == 'list-intents'){
          getService = 'edit_intent';
        } else if(getParent == 'list-entities'){
          getService = 'edit_entity';
        } else {
          getService = 'edit_dialog';
        }
        var count = 0;
        for(var i=0; i<getChildren.length; i++){
          if(i != 0) {
            getCheckBox = getChildren[i].children[0].children[0].children[0];
            if(getCheckBox.checked) {
              count = count + 1;
            }
          }
        }
        if(count > 0){
          el.parentElement.parentElement.className = 'delete-examples-tmp';
          openModal('#myModalExamples', 'Advertencia', '¿Estás seguro de lo que deseas remover?', '');
        } else {
          openModal('#myModal', 'Advertencia', 'Debes seleccionar al menos <b>un</b> ejemplo', 'error');
        }
      }
      
      function confirmDeleteExamples(tree, treeBranch){
        stringObj = '';
        var nameVal = '';
        switch (getService) {
          case 'create_intent':
            tree = 'intent';
            treeBranch = 'examples';
            nameObj = "'text'";
            break;
          case 'edit_intent':
            tree = 'intent';
            treeBranch = 'new_examples';
            nameObj = "'text'";
            break;
          case 'create_entity':
            tree = 'entity';
            treeBranch = 'values';
            nameObj = "'value'";
            break;
          case 'edit_entity':
            tree = 'entity';
            treeBranch = 'new_values';
            nameObj = "'value'";
        }
        var getClass = document.getElementsByClassName('delete-examples-tmp');
        getNameIntent = getClass[0].parentElement.children[0].children[0].children[1].textContent.substring(1);
        for(var i = getClass[0].children.length-1; i > 0; i--){
          if(getClass[0].children[i].children[0].children[0].children[0].checked == true){
            getClass[0].children[i].remove();
          } else {
            stringObj += "{"+nameObj+": '"+getClass[0].children[i].children[0].children[1].textContent+"'},";
          }
        }
        stringObj = stringObj.substring(0, stringObj.length-1);
        if(stringObj == ""){
          stringObj = "{}";
        }
        var args = {
          [tree]: getNameIntent,
          [treeBranch]: stringObj,
          id_cliente : "1"
        }
        var promise = $.ajax({
          type: 'POST',
          url: getPath+"mant/"+getService,
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer "+getTkn
          },
          data: JSON.stringify(args),
          dataType: 'json',
          contentType: 'application/json; charset=utf-8'
        }).done(function(response){
          if(response.status == '200'){
            openModal('#myModal', 'Genial!', 'La intención se ha actualizado con éxito', 'success');
            getExamplesNum();
          } else {
            openModal('#myModal', 'Auch!', 'Tenemos un problema, favor intenta nuevamente', 'error');
          }
        })
      
        getNameIntent = '';
        stringObj = '';
        document.getElementsByClassName('delete-examples-tmp')[0].classList.remove('delete-examples-tmp');
      }
      
      function clickButton(){
        confirmDeleteExamples(tree, treeBranch);
        getExamplesNum();
      }
      
      function addDialogOption(el){
        var $element = $(el);
        var isEdition = $element.hasClass('edit-button');
        var getModal        = isEdition ? document.getElementById('modal-dialog-edit') : document.getElementById('modal-dialog');
        var getUlDialog     = isEdition ? document.getElementById('list-dialogs-respond-edit') : document.getElementById('list-dialogs-respond');
        var getContRespond  = isEdition ? document.getElementById('responds-edit') : document.getElementById('responds');
        var getCondition    = isEdition ? document.getElementById('condition-edit') : document.getElementById('condition');
        var getTextRespond  = isEdition ? document.getElementById('text-respond-edit') : document.getElementById('text-respond');
        var addListDialog   = '<li>';
            addListDialog  += '<div class="respond">Entonces responde con <textarea>'+getTextRespond.value+'</textarea></div>';
            addListDialog  += '<a class="delete-dialog" href="#;" onclick="deleteDialogList(this)"><i class="fa fa-times-circle" aria-hidden="true"></i></a>';
            addListDialog  += '</li>';
            
        if(getTextRespond.value != '' && getCondition.value != ''){
          if(isEdition){
            $('#list-dialogs-respond-edit').prepend(addListDialog);
          }else{
            $('#list-dialogs-respond').prepend(addListDialog);
          }
          getContRespond.style.display = "block";
          el.parentElement.classList.remove('error');
        } else {
          el.parentElement.classList.add('error');
        }
        getTextRespond.value  = '';
      }
      
      function deleteDialogList(el){
        el.parentElement.remove();
      }
      
      function saveDialog(){
        var getDialogService  = getService;
        var getNameDialogQuotes = '';
        var getModal          = document.getElementById('modal-dialog');
        var getUlDialog       = document.getElementById('list-dialogs-respond');
        var getNameDialog     = document.getElementById('name-dialog');
        var getContRespond    = document.getElementById('responds');
        var getTextRespond    = document.getElementById('text-respond');
        var getListDialog     = '';
        var addDialog         = '';
        var getCondition      = document.getElementById('condition');
        var addFunction       = "openCustomModal(this, '#modal-dialog', false, 'edit_dialog'); editDialog(this)";
        var finAndDelete      = document.getElementsByClassName('delete-item-dialog');
        var arrayResponse     = '';
        var addValues         = '';
        if(getNameDialog.value != '' ){
          for(var i = 0; i < getUlDialog.children.length; i++){
            getListDialog += '<li>';
            getListDialog += '<div class="dialogs">'+getUlDialog.children[i].children[0].children[0].textContent+'</div>';
            getListDialog += '</li>';
            if(getUlDialog.children.length > 1) {
              arrayResponse += '"'+getUlDialog.children[i].children[0].children[0].textContent+'",';
            } else {
              arrayResponse = '"'+getUlDialog.children[i].children[0].children[0].textContent+'"';
            }
          }
          if(getUlDialog.children.length > 1) {
            addValues     = '{"values": ['+arrayResponse.substring(0, (arrayResponse.length - 1))+'],"selection_policy": "random"}';
            arrayResponse = addValues;
          }
          addDialog       = '<li data-dialognode="'+getDataNode+'">';
          addDialog      += '<div class="title" data-condition="'+getCondition.value+'">';
          addDialog      += '<span onclick="'+addFunction+'">';
          addDialog      += '<ul class="list-dialogs-hide">';
          addDialog      += getListDialog;
          addDialog      += '</ul>';
          addDialog      += '</span>';
          addDialog      += '<a href="#;" onclick="removeDialog(this)"><i class="fa fa-trash"></i></a>';
          addDialog      += '</div>';
          addDialog      += '</li>';
          if(finAndDelete.length > 0) {
            finAndDelete[0].remove();
          }
          $('#list-dialogs').prepend(addDialog);
          $('.delete-item-dialog').remove();
          if(getDialogService == 'edit_dialog'){
            getNameDialogQuotes = getDataNode;
          } else {
            getNameDialogQuotes = getNameDialog.value;
          }
          var getConditionVal = getCondition.value;
          var args = {
            title: getNameDialogQuotes,
            conditions: getConditionVal,
            texto: arrayResponse,
            id_cliente : "1"
          }
          var promise = $.ajax({
            type: 'POST',
            url: getPath+"mant/"+getDialogService,
            "headers": {
              "Content-Type": "application/json",
              "Authorization": "Bearer "+getTkn
            },
            data: JSON.stringify(args),
            dataType: 'json',
            contentType: 'application/json; charset=utf-8'
          }).done(function(response){
            if(response.status == '200'){
              getNameDialog.value           = '';
              getTextRespond.value          = '';
              getUlDialog.innerHTML         = '';
              getContRespond.style.display  = 'none';
              var getOptionLength = getCondition.length;
              openModal('#myModal', 'Genial!', 'La respuesta se ha agregado con éxito', 'success');
              clearIntent('#name-dialog', '#modal-dialog');
              getDataNode = '';
            } else {
              openModal('#myModal', 'Lo sentimos', 'Tenemos un problema. Favor intenta nuevamente.', 'error');
            }
          })
      
        } else {
          closeCustomModal('#modal-dialog');
          clearIntent('#name-dialog', '#modal-dialog');
          openModal('#myModal', 'Lo sentimos', 'Debes añadir un <b>nombre al diálogo</b>', 'error');
        }
      }
      var getDataNode = '';
      
      function editDialog(el){
        var $element = $(el),
            $getParentLi = $element.parent().parent(),
            getDataNode = $getParentLi.data('dialognode'),
            $getNameDialog = $('#name-dialog-edit'),
            getDataAttr = $element.parent().data('condition'),
            $getCondition = $('#condition-edit'),
            responses = $getParentLi.data('response');
      
        $getNameDialog.val(getDataNode);
        $getCondition.val(getDataAttr);
      
        var html = '';
        for(var i = 0; i < responses.length; i++){
          html  += '<li>';
          html  += '<div class="respond">Entonces responde con <textarea data-autoresize>'+responses[i]+'</textarea></div>';
          html  += '<a class="delete-dialog" href="#;" onclick="deleteDialogList(this)"><i class="fa fa-times-circle" aria-hidden="true"></i></a>';
          html  += '</li>';
        }
      
        $('#list-dialogs-respond-edit').html(html);
        $('#responds-edit').show();
      
        //-     getDataNode         = el.parentElement.parentElement.dataset.dialognode;
        //- var getParentLi         = el.parentElement.parentElement;
        //- var getNameDialog       = document.getElementById('name-dialog-edit');
        //-     getNameDialog.value = el.children[0].textContent;
        //- var getLiLength         = el.children[2].children.length;
        //- var getContRespond      = document.getElementById('responds-edit');
        //- var addListDialog       = '';
        //- var getDataAttr         = el.parentElement.dataset.condition;
        //- var getCondition        = document.getElementById('condition-edit');
        //-     getCondition.value  = getDataAttr;
        //- getParentLi.classList.add('delete-item-dialog');
        //- for(var i = 0; i < getLiLength; i++) {
        //-   var getDialogs   = el.children[2].children[i].children[0].textContent;
        //-   addListDialog   = '<li>';
        //-   addListDialog  += '<div class="respond">Entonces responde con <textarea data-autoresize>'+getDialogs+'</textarea></div>';
        //-   addListDialog  += '<a class="delete-dialog" href="#;" onclick="deleteDialogList(this)"><i class="fa fa-times-circle" aria-hidden="true"></i></a>';
        //-   addListDialog  += '</li>';
        //-   $('#list-dialogs-respond').prepend(addListDialog);
        //- }
        //- getContRespond.style.display = "block";
      }
      
      function openModalTest() {
        $('#myModalAssistant').modal({
          backdrop: 'static',
          keyboard: false,
          show: true
        });
      }
      
      function removeDialog(el){
        el.parentElement.parentElement.setAttribute('data-todelete', '1');
        openModal('#myModalChoiceDialog', 'Advertencia', '¿Estás seguro que deseas remover este diálogo?', '');
      }
      
      function confirmDeleteDialog(){
        getNameDialog = $('[data-todelete] h5').text();
        var args = {
          id_dialog: getNameDialog,
          id_cliente : "1"
        }
        var promise = $.ajax({
          type: 'POST',
          url: getPath+"mant/delete_dialogs",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer "+getTkn,
            "Cache-Control": "no-cache",
          },
          data: JSON.stringify(args),
          dataType: 'json',
          contentType: 'application/json; charset=utf-8'
        }).done(function(response){
          if(response.status == '200'){
            openModal('#myModal', 'Genial!', 'El diálogo se ha eliminado con éxito', 'success');
            $('[data-todelete]').remove();
          } else {
            openModal('#myModal', 'Auch!', 'Tenemos un problema, favor intenta nuevamente', 'error');
          }
        })
      }
      
      function is_url(str)
      {
        regexp =  /^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;
        if (regexp.test(str))
        {
          return true;
        }
        else
        {
          return false;
        }
      }
      
      function saveUrl() {
        var getSession = "1";
        var getUrlVal = $('#get-url').val();
        var getUrlForm = document.getElementById('form-url');
        if(is_url(getUrlVal) == true){
          document.getElementById('get-url').classList.remove('error');
          var args = {
            id_cliente: getSession,
            url: getUrlVal
          }
          var promise = $.ajax({
            type: 'POST',
            url: getPath+"mant/addurl",
            "headers": {
              "Content-Type": "application/json",
              "Authorization": "Bearer "+getTkn,
              "Cache-Control": "no-cache",
            },
            data: JSON.stringify(args),
            dataType: 'json',
            contentType: 'application/json; charset=utf-8'
          }).done(function(response){
            if(response.estado.codigoEstado == '200'){
              openModal('#myModal', 'Genial!', 'La URL se ha agregado con éxito', 'success');
      
              const customParams = localStorage.getItem('customParams');
              // Decrypt
              var bytes  = CryptoJS.AES.decrypt(customParams, KEY_ENCRYPT);
              var decryptedData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));
              decryptedData.url = getUrlVal;
              var ciphertext = CryptoJS.AES.encrypt(JSON.stringify(decryptedData), KEY_ENCRYPT).toString();
              localStorage.setItem('customParams', ciphertext);
              $('#get-url').val(getUrlVal);
              localStorage.setItem('url',getUrlVal);
            }else{
              openModal('#myModal', 'Lo sentimos', 'Tenemos un problema en el servidor<br><b>Error 500</b>', 'error');
            }
          })
        }else{
          document.getElementById('get-url').classList.add('error');
        }
        event.preventDefault();
      }
      
      function getAllDialogs(){
        getService = 'edit_dialogs';
        var args = {
          id_cliente : "1"
        }
        var promise = $.ajax({
          type: 'POST',
          url: getPath+"mant/list_dialogs",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer "+getTkn,
            "Cache-Control": "no-cache",
          },
          data: JSON.stringify(args),
          dataType: 'json',
          contentType: 'application/json; charset=utf-8'
        }).done(function(response){
      
          if(response.status == '200'){
            for(var i = 0; i < response.data.dialog_nodes.length; i++){
              var listDialog        = '';
              var paramsFunction    = "this, '#modal-dialog', false, 'edit_dialog'";
              var listDialogRespond = '';
              if(response.data.dialog_nodes[i].conditions == 'false' || response.data.dialog_nodes[i].conditions == 'true' || response.data.dialog_nodes[i].conditions == '' || response.data.dialog_nodes[i].conditions == null){
              } else {
                var getNodeText = response.data.dialog_nodes[i].title;
                if (getNodeText == null){
                  getNodeText = 'Sin nombre';
                }
                if(response.data.dialog_nodes[i].output.hasOwnProperty('text')) {
                  if(response.data.dialog_nodes[i].output.text.hasOwnProperty('values')){
                    for (var j = 0; j < response.data.dialog_nodes[i].output.text.values.length; j++){ 
                      listDialogRespond += '<li><div class="dialogs"><pre><code>'+response.data.dialog_nodes[i].output.text.values[j]+'</code></pre></div></li>';
                    }
                  } else {
                    listDialogRespond += '<li><div class="dialogs"><pre><code>'+response.data.dialog_nodes[i].output.text+'</code></pre></div></li>';
                  }
                  listDialog  = '<li data-dialognode="'+response.data.dialog_nodes[i].dialog_node+'">';
                  listDialog += '  <div class="title" data-condition="'+response.data.dialog_nodes[i].conditions+'">';
                  listDialog += '    <span onclick="openCustomModal('+paramsFunction+'); editDialog(this)">';
                  listDialog += '      <h5>'+getNodeText+'</h5>';
                  listDialog += '      <ul class="list-dialogs-hide">'+listDialogRespond+'</ul>';
                  listDialog += '    </span>';
                  listDialog += '    <a onclick="removeDialog(this)"><i class="fa fa-trash"></i></a>';
                  listDialog += '  </div>';
                  listDialog += '</li>';
                }
              }
              $('#list-dialogs').append(listDialog);
            }
            spinnerOut('#dialog');
            getExamplesNum();
          } else {
            openModal('#myModal', 'Lo sentimos', 'Tenemos un problema en el servidor<br><b>Error 500</b>', 'error');
          }
        })
      }
      
      $(function(){
        $('#tabs a').click(function (e) {
          e.preventDefault()
          $(this).tab('show')
        });
      });
      
      function init(){
        if(localStorage.getItem('customParams')!==undefined 
          && localStorage.getItem('customParams')!==null
          && hasToken){
          const customParams = localStorage.getItem('customParams');
          let bytes  = CryptoJS.AES.decrypt(customParams, KEY_ENCRYPT),
            decryptedData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));
            url = decryptedData.url;
          document.getElementById('get-url').value = url;
        }else{
        setTimeout(() => {
          init();
        }, 300);
        }
      }
      init();
    </script>
  </body>
</html>